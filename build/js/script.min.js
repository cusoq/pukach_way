"use strict";const ESC_KEYCODE=27,ENTER_KEYCODE=13,menuToggleButton=document.querySelector(".header__menu-toggle-button"),popup=document.querySelector(".navigation__list"),feedbackOpenButtons=document.querySelectorAll(".buy-link"),messageOpenButton=document.querySelector(".main__buy-button"),modal=document.querySelector(".main__buy"),modalSuccess=document.querySelector(".main__success"),cross=modal.querySelector(".main__buy-close-button"),crossSuccess=modalSuccess.querySelector(".main__success-close-button"),feedbackForm=modal.querySelector(".main__buy-form"),questionForm=document.querySelector(".feedback__form"),nameInput=modal.querySelector(".main__buy-field--tel"),emailInput=modal.querySelector(".main__buy-field--email"),storage="",isStorageSupport=!0,tabButtons=document.querySelectorAll(".detals__tab-button"),tabBlocks=document.querySelectorAll(".detals__tab-block"),togglePopup=function(){popup.classList.toggle("navigation__list--hidden")},toggleOpenCloseButton=function(){menuToggleButton.classList.toggle("header__menu-toggle-button--burger"),menuToggleButton.classList.toggle("header__menu-toggle-button--cross")},toggleMenu=function(){togglePopup(),toggleOpenCloseButton()},onClickToggler=function(e){e.preventDefault(),toggleMenu()},onEnterOpener=function(e){e.keyCode===ENTER_KEYCODE&&(e.preventDefault(),window.removeEventListener("keydown",onEnterOpener),toggleMenu())},onEscCloser=function(e){e.keyCode===ESC_KEYCODE&&(e.preventDefault(),window.removeEventListener("keydown",onEscCloser),popup.classList.add("navigation__list--hidden"),menuToggleButton.classList.remove("header__menu-toggle-button--cross"),menuToggleButton.classList.add("header__menu-toggle-button--burger"))},getFocus=function(){storage?(nameInput.value=storage,emailInput.focus()):nameInput.focus()},checkStorageSupport=function(){try{localStorage.getItem("name")}catch(e){isStorageSupport=!1}},showPopup=function(){modal.classList.remove("main__buy--closed"),modal.classList.add("main__buy--showed"),checkStorageSupport(),getFocus()},closePopup=function(){modal.classList.remove("main__buy--showed"),modal.classList.add("main__buy--closed")},checkValues=function(){nameInput.value&&emailInput.value?(isStorageSupport&&localStorage.setItem("name",nameInput.value),feedbackForm.submit(),closePopup(),console.log("Сообщение отправлено")):console.log("Заполните поле")},switchTabs=t=>{tabButtons.forEach(e=>e.classList.remove("detals__tab-button--active")),t.target&&t.target.classList.add("detals__tab-button--active"),tabBlocks.forEach(e=>{e.dataset.country===t.target.dataset.country?e.classList.remove("visually-hidden"):e.classList.add("visually-hidden")})},onClickOpener=function(e){e.preventDefault(),showPopup()},onClickCloser=function(e){e.preventDefault(),closePopup()},onClickSuccessCloser=function(e){e.preventDefault(),modal.classList.remove("main__buy--showed"),modal.classList.add("main__buy--closed")},onEscapeCloser=function(e){e.keyCode===ESC__KEYCODE&&(e.preventDefault(),window.removeEventListener("keydown",onEscapeCloser),closePopup())},onSubmit=function(e){e.preventDefault(),checkValues(),modalSuccess.classList.remove("main__success--closed"),modalSuccess.classList.add("main__success--showed"),window.location.replace("index.html")},onClickTabShower=function(e){e.preventDefault(),switchTabs(e)};feedbackForm.addEventListener("submit",onSubmit),questionForm.addEventListener("submit",onSubmit),feedbackOpenButtons.forEach(e=>e.addEventListener("click",onClickOpener)),feedbackOpenButtons.forEach(e=>e.addEventListener("keydown",onClickOpener)),cross.addEventListener("click",onClickCloser),crossSuccess.addEventListener("click",onClickSuccessCloser),menuToggleButton.addEventListener("keydown",onEnterOpener),menuToggleButton.addEventListener("click",onClickToggler),document.addEventListener("keydown",onEscCloser),tabButtons.forEach(e=>e.addEventListener("click",onClickTabShower));